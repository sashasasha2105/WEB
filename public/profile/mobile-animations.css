/* === MOBILE-ANIMATIONS.CSS - МОБИЛЬНЫЕ АНИМАЦИИ === */

/* === Touch feedback анимации === */
@media (max-width: 768px) {

    /* Touch эффекты для кнопок */
    .tab-button:active,
    .save-button:active,
    .action-btn:active,
    .refresh-btn:active,
    .cta-button:active {
        transform: scale(0.95) !important;
        transition: transform 0.1s ease !important;
    }

    .stat-modern:active {
        transform: scale(0.98) translateY(-4px) !important;
        transition: transform 0.1s ease !important;
    }

    .order-card-modern:active {
        transform: scale(0.98) translateY(-4px) !important;
        transition: transform 0.1s ease !important;
    }

    .setting-item-modern:active {
        transform: scale(0.98) translateX(2px) !important;
        transition: transform 0.1s ease !important;
    }

    /* Мобильные анимации входа */
    .profile-hero {
        animation: mobileSlideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .stat-modern {
        animation: mobilePopIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .stat-modern:nth-child(1) { animation-delay: 0.2s; }
    .stat-modern:nth-child(2) { animation-delay: 0.35s; }
    .stat-modern:nth-child(3) { animation-delay: 0.5s; }

    .modern-tabs {
        animation: mobileSlideInFromTop 0.6s ease-out 0.3s both;
    }

    .tab-content.active {
        animation: mobileContentSlide 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .order-card-modern {
        animation: mobileCardSlideIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .order-card-modern:nth-child(1) { animation-delay: 0.1s; }
    .order-card-modern:nth-child(2) { animation-delay: 0.2s; }
    .order-card-modern:nth-child(3) { animation-delay: 0.3s; }

    .modern-card {
        animation: mobileCardFadeIn 0.7s ease-out;
    }

    .form-group-modern {
        animation: mobileFormSlideUp 0.5s ease-out;
    }

    .form-group-modern:nth-child(1) { animation-delay: 0.1s; }
    .form-group-modern:nth-child(2) { animation-delay: 0.15s; }
    .form-group-modern:nth-child(3) { animation-delay: 0.2s; }
    .form-group-modern:nth-child(4) { animation-delay: 0.25s; }
    .form-group-modern:nth-child(5) { animation-delay: 0.3s; }

    .setting-item-modern {
        animation: mobileSettingSlide 0.6s ease-out;
    }

    .setting-item-modern:nth-child(1) { animation-delay: 0.1s; }
    .setting-item-modern:nth-child(2) { animation-delay: 0.2s; }
    .setting-item-modern:nth-child(3) { animation-delay: 0.3s; }
    .setting-item-modern:nth-child(4) { animation-delay: 0.4s; }

    /* Toggle switch анимации */
    .modern-toggle input:checked + .toggle-slider {
        animation: mobileSwitchOn 0.3s ease-out;
    }

    .modern-toggle input:not(:checked) + .toggle-slider {
        animation: mobileSwitchOff 0.3s ease-out;
    }

    /* Пульсация кнопок */
    .refresh-btn {
        animation: mobilePulse 2s infinite;
    }

    .cta-button {
        animation: mobileGlow 3s ease-in-out infinite alternate;
    }

    /* Убираем hover эффекты на мобильных */
    .stat-modern:hover,
    .order-card-modern:hover,
    .setting-item-modern:hover,
    .modern-card:hover {
        transform: none !important;
    }

    /* Touch ripple эффект */
    .touchable-element {
        position: relative;
        overflow: hidden;
    }

    .touchable-element::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: width 0.3s ease, height 0.3s ease;
        pointer-events: none;
        z-index: 1;
    }

    .touchable-element:active::before {
        width: 200px;
        height: 200px;
    }

    /* Спиннер с эффектом */
    .spinner-modern {
        animation: mobileSpinGlow 1.5s linear infinite;
    }

    /* Empty state анимации */
    .no-orders-modern {
        animation: mobileEmptyStateSlide 1s ease-out;
    }

    .empty-box {
        animation: mobileFloatBounce 4s ease-in-out infinite;
    }

    .empty-sparkles {
        animation: mobileSparkleRotate 3s linear infinite;
    }

    /* Футер анимация */
    .modern-footer {
        animation: mobileFooterSlideUp 0.8s ease-out 0.5s both;
    }

    /* Staggered анимации для списков */
    .orders-grid .order-card-modern {
        opacity: 0;
        animation: mobileStaggerSlideUp 0.6s ease-out forwards;
    }

    .settings-list .setting-item-modern {
        opacity: 0;
        animation: mobileStaggerSlideLeft 0.5s ease-out forwards;
    }

    /* Переходы между вкладками */
    .tab-content {
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .tab-content:not(.active) {
        transform: translateX(-20px);
        opacity: 0;
        pointer-events: none;
    }

    .tab-content.active {
        transform: translateX(0);
        opacity: 1;
        pointer-events: auto;
    }

    /* Input focus анимация */
    .form-group-modern input:focus {
        animation: mobileInputFocus 0.3s ease-out;
    }

    /* Notification анимации */
    .confirm-overlay {
        animation: mobileOverlaySlide 0.4s ease-out;
    }

    .confirm-dialog {
        animation: mobileDialogBounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
}

/* === Keyframes для мобильных анимаций === */
@keyframes mobileSlideUp {
    from {
        opacity: 0;
        transform: translateY(50px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes mobilePopIn {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(30px);
    }
    60% {
        opacity: 1;
        transform: scale(1.05) translateY(-5px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes mobileSlideInFromTop {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes mobileContentSlide {
    from {
        opacity: 0;
        transform: translateX(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes mobileCardSlideIn {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes mobileCardFadeIn {
    from {
        opacity: 0;
        transform: translateY(25px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes mobileFormSlideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes mobileSettingSlide {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes mobileSwitchOn {
    0% {
        background: var(--liquid-glass-dark-medium);
    }
    50% {
        background: var(--liquid-primary);
        transform: scale(1.05);
    }
    100% {
        background: var(--liquid-primary);
        transform: scale(1);
    }
}

@keyframes mobileSwitchOff {
    0% {
        background: var(--liquid-primary);
    }
    50% {
        background: var(--liquid-glass-medium);
        transform: scale(1.05);
    }
    100% {
        background: var(--liquid-glass-dark-medium);
        transform: scale(1);
    }
}

@keyframes mobilePulse {
    0%, 100% {
        box-shadow: var(--liquid-shadow-subtle);
    }
    50% {
        box-shadow: var(--liquid-shadow-regular), 0 0 20px rgba(0, 122, 255, 0.3);
    }
}

@keyframes mobileGlow {
    from {
        box-shadow: var(--liquid-shadow-regular);
    }
    to {
        box-shadow: var(--liquid-shadow-elevated), 0 0 30px rgba(0, 122, 255, 0.4);
    }
}

@keyframes mobileSpinGlow {
    0% {
        transform: rotate(0deg);
        filter: brightness(1);
    }
    50% {
        filter: brightness(1.2);
    }
    100% {
        transform: rotate(360deg);
        filter: brightness(1);
    }
}

@keyframes mobileEmptyStateSlide {
    from {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes mobileFloatBounce {
    0%, 100% {
        transform: translateY(0) rotate(0deg);
    }
    25% {
        transform: translateY(-8px) rotate(2deg);
    }
    50% {
        transform: translateY(-4px) rotate(0deg);
    }
    75% {
        transform: translateY(-12px) rotate(-2deg);
    }
}

@keyframes mobileSparkleRotate {
    from {
        transform: rotate(0deg) scale(1);
        opacity: 0.6;
    }
    50% {
        transform: rotate(180deg) scale(1.1);
        opacity: 1;
    }
    to {
        transform: rotate(360deg) scale(1);
        opacity: 0.6;
    }
}

@keyframes mobileFooterSlideUp {
    from {
        opacity: 0;
        transform: translateY(50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes mobileStaggerSlideUp {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes mobileStaggerSlideLeft {
    from {
        opacity: 0;
        transform: translateX(-25px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes mobileInputFocus {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.02);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes mobileOverlaySlide {
    from {
        opacity: 0;
        backdrop-filter: blur(0px);
        -webkit-backdrop-filter: blur(0px);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }
}

@keyframes mobileDialogBounce {
    0% {
        opacity: 0;
        transform: scale(0.7) translateY(50px);
    }
    60% {
        opacity: 1;
        transform: scale(1.05) translateY(-10px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* === Оптимизации для очень маленьких экранов === */
@media (max-width: 480px) {

    /* Более плавные анимации */
    .profile-hero {
        animation-duration: 1s;
    }

    .stat-modern {
        animation-duration: 0.8s;
    }

    .order-card-modern {
        animation-duration: 0.7s;
    }

    /* Уменьшенные эффекты для экономии батареи */
    .avatar-circle::before {
        animation-duration: 15s;
    }

    .profile-hero::before {
        animation-duration: 20s;
    }

    body::after {
        animation-duration: 40s;
    }

    /* Оптимизированные тени */
    .stat-modern,
    .order-card-modern,
    .modern-card {
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1) !important;
    }

    .stat-modern:active,
    .order-card-modern:active {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    }
}

/* === Landscape режим на мобильных === */
@media (max-width: 768px) and (orientation: landscape) {

    .profile-hero {
        padding: 24px 20px;
        margin-bottom: 20px;
    }

    .profile-stats-modern {
        gap: 10px;
    }

    .stat-modern {
        padding: 16px 12px;
    }

    .tab-nav {
        padding: 4px;
    }

    .tab-button {
        padding: 10px 16px;
        font-size: 0.9em;
    }

    .modern-card {
        padding: 20px 16px;
        margin-bottom: 16px;
    }

    .order-card-modern {
        padding: 20px 16px;
    }

    /* Ускоренные анимации в landscape */
    .profile-hero,
    .stat-modern,
    .order-card-modern,
    .modern-card {
        animation-duration: 0.4s;
    }
}

/* === Темная тема на мобильных === */
@media (prefers-color-scheme: dark) and (max-width: 768px) {

    .stat-modern,
    .order-card-modern,
    .modern-card {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
    }

    .touchable-element::before {
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    }

    .cta-button {
        animation: mobileDarkGlow 3s ease-in-out infinite alternate;
    }
}

@keyframes mobileDarkGlow {
    from {
        box-shadow: var(--liquid-shadow-regular);
    }
    to {
        box-shadow: var(--liquid-shadow-elevated), 0 0 25px rgba(100, 181, 246, 0.4);
    }
}

/* === iOS специфичные анимации === */
@supports (-webkit-touch-callout: none) {

    .profile-hero,
    .modern-card,
    .tab-nav {
        transition: backdrop-filter 0.3s ease;
    }

    .stat-modern:active,
    .order-card-modern:active {
        transform: scale(0.97) translateY(-2px) !important;
    }

    /* Safe Area поддержка */
    @media (max-width: 480px) {
        .profile-container {
            padding-top: calc(120px + env(safe-area-inset-top));
            padding-bottom: calc(40px + env(safe-area-inset-bottom));
            padding-left: calc(16px + env(safe-area-inset-left));
            padding-right: calc(16px + env(safe-area-inset-right));
        }

        .modern-footer {
            padding-bottom: calc(48px + env(safe-area-inset-bottom));
        }
    }
}

/* === Reduced Motion === */
@media (prefers-reduced-motion: reduce) and (max-width: 768px) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .tab-content {
        transition: opacity 0.2s ease !important;
    }

    .form-group-modern input:focus {
        transition: border-color 0.2s ease !important;
    }
}