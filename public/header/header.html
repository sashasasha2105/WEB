<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">

  <!-- === –£–õ–£–ß–®–ï–ù–ù–´–ï –ú–ï–¢–ê-–¢–ï–ì–ò –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –ò PWA === -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">

  <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="clip & go">

  <!-- –¢–µ–º–∞ –∏ —Ü–≤–µ—Ç–∞ -->
  <meta name="theme-color" content="#1ca6f8">
  <meta name="msapplication-navbutton-color" content="#1ca6f8">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
  <link rel="manifest" href="/manifest.json">

  <!-- –ò–∫–æ–Ω–∫–∏ –¥–ª—è PWA -->
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="icon" href="/assets/logo.png">
  <link rel="shortcut icon" href="/assets/logo.png">

  <!-- CSS —Å—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="/header/header.css">

  <title>clip & go</title>
</head>
<body>
<!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô HEADER HTML - –£–ë–†–ê–ù –õ–û–ì–û–¢–ò–ü –ò–ó –ú–û–ë–ò–õ–¨–ù–û–ì–û –ú–ï–ù–Æ –ò –û–î–ù–ê –ö–ù–û–ü–ö–ê -->

<header id="siteHeader" class="site-header">
  <div class="header-container">

    <!-- –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –º–æ–±–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é —Å –¢–†–ï–ú–Ø –ø–æ–ª–æ—Å–∫–∞–º–∏ -->
    <button class="mobile-menu-toggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
      <span class="burger-line burger-line-1"></span>
      <span class="burger-line burger-line-2"></span>
      <span class="burger-line burger-line-3"></span>
    </button>

    <!-- –õ–æ–≥–æ—Ç–∏–ø (—Ü–µ–Ω—Ç—Ä) -->
    <div class="header-logo">
      <a href="/index.html" class="logo-link">
        <img src="/assets/logo.png" alt="clip & go" class="logo-image">
      </a>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (—Ü–µ–Ω—Ç—Ä –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
    <nav class="header-nav">
      <a href="/index.html#main" class="nav-link" data-section="main">
        <span class="nav-text">–ì–ª–∞–≤–Ω–∞—è</span>
      </a>
      <a href="/index.html#product" class="nav-link" data-section="product">
        <span class="nav-text">–û –ø—Ä–æ–¥—É–∫—Ç–µ</span>
      </a>
      <a href="/gallery/gallery.html" class="nav-link">
        <span class="nav-text">–ì–∞–ª–µ—Ä–µ—è</span>
      </a>
      <a href="/instruction/instruction.html" class="nav-link">
        <span class="nav-text">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span>
      </a>
      <a href="/index.html#contact" class="nav-link" data-section="contact">
        <span class="nav-text">–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
      </a>
      <a href="/profile/profile.html" class="nav-link profile-nav">
        <div class="profile-icon">üë§</div>
        <div class="orders-badge" id="ordersBadge">0</div>
      </a>
    </nav>

    <!-- –ö–æ—Ä–∑–∏–Ω–∞ (–ø—Ä–∞–≤—ã–π –∫—Ä–∞–π) -->
    <div class="header-actions">
      <a href="/cart/cart.html" class="cart-btn">
        <img src="/assets/icons/carticon.png" alt="–ö–æ—Ä–∑–∏–Ω–∞" class="cart-icon">
        <div class="cart-badge" id="cartBadge">0</div>
      </a>
    </div>
  </div>

  <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-backdrop"></div>
    <div class="mobile-menu-content">

      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é -->
      <nav class="mobile-nav">
        <a href="/index.html#main" class="mobile-nav-link" data-section="main">
          <span>–ì–ª–∞–≤–Ω–∞—è</span>
          <div class="mobile-nav-arrow">‚Üí</div>
        </a>
        <a href="/index.html#product" class="mobile-nav-link" data-section="product">
          <span>–û –ø—Ä–æ–¥—É–∫—Ç–µ</span>
          <div class="mobile-nav-arrow">‚Üí</div>
        </a>
        <a href="/gallery/gallery.html" class="mobile-nav-link">
          <span>–ì–∞–ª–µ—Ä–µ—è</span>
          <div class="mobile-nav-arrow">‚Üí</div>
        </a>
        <a href="/instruction/instruction.html" class="mobile-nav-link">
          <span>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span>
          <div class="mobile-nav-arrow">‚Üí</div>
        </a>
        <a href="/index.html#contact" class="mobile-nav-link" data-section="contact">
          <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
          <div class="mobile-nav-arrow">‚Üí</div>
        </a>
      </nav>

      <!-- –î–µ–π—Å—Ç–≤–∏—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é -->
      <div class="mobile-actions">
        <a href="/profile/profile.html" class="mobile-action-btn profile-mobile">
          <div class="action-icon">üë§</div>
          <div class="action-content">
            <span class="action-title">–ü—Ä–æ—Ñ–∏–ª—å</span>
            <span class="action-subtitle">–í–∞—à–∏ –∑–∞–∫–∞–∑—ã</span>
          </div>
          <div class="orders-badge mobile" id="mobileOrdersBadge">0</div>
        </a>
        <a href="/cart/cart.html" class="mobile-action-btn cart-mobile">
          <img src="/assets/icons/carticon.png" alt="–ö–æ—Ä–∑–∏–Ω–∞" class="cart-icon">
          <div class="action-content">
            <span class="action-title">–ö–æ—Ä–∑–∏–Ω–∞</span>
            <span class="action-subtitle">–í–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</span>
          </div>
          <div class="cart-badge mobile" id="mobileCartBadge">0</div>
        </a>
      </div>
    </div>
  </div>
</header>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<main id="mainContent">
  <!-- –°—é–¥–∞ –¥–æ–±–∞–≤–ª—è–π —Å–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
</main>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
<script src="/js/cart-manager.js"></script>
<script src="/js/order-manager.js"></script>
<script src="/header/header.js"></script>

<!-- === –°–ö–†–ò–ü–¢ –î–õ–Ø –ê–í–¢–û–°–ö–†–´–¢–ò–Ø –ê–î–†–ï–°–ù–û–ô –°–¢–†–û–ö–ò === -->
<script>
  // 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  window.addEventListener('load', function() {
    setTimeout(function() {
      // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –∏ –æ–±—Ä–∞—Ç–Ω–æ –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
      if (window.innerWidth <= 768) {
        window.scrollTo(0, 1);
        setTimeout(() => window.scrollTo(0, 0), 100);
      }
    }, 500);
  });

  // 2. –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ç–∞–ø–µ –Ω–∞ —ç–∫—Ä–∞–Ω
  let hasScrolled = false;
  document.addEventListener('touchstart', function() {
    if (!hasScrolled && window.innerWidth <= 768) {
      window.scrollTo(0, 1);
      setTimeout(() => window.scrollTo(0, 0), 50);
      hasScrolled = true;
    }
  }, { once: true });

  // 3. PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞ - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  let deferredPrompt;

  window.addEventListener('beforeinstallprompt', (e) => {
    console.log('PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞');
    e.preventDefault();
    deferredPrompt = e;

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    showInstallButton();
  });

  function showInstallButton() {
    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"
    const installBtn = document.createElement('button');
    installBtn.innerHTML = 'üì± –î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω';
    installBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #1ca6f8 0%, #0057c2 100%);
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 25px;
                font-weight: 600;
                box-shadow: 0 4px 20px rgba(28, 166, 248, 0.3);
                z-index: 100000;
                cursor: pointer;
                font-size: 14px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: all 0.3s ease;
            `;

    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log('PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞:', outcome);
        deferredPrompt = null;
        installBtn.remove();
      }
    });

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    installBtn.style.opacity = '0';
    installBtn.style.transform = 'translateX(-50%) translateY(100px)';
    document.body.appendChild(installBtn);

    setTimeout(() => {
      installBtn.style.opacity = '1';
      installBtn.style.transform = 'translateX(-50%) translateY(0)';
    }, 100);

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
      if (installBtn.parentNode) {
        installBtn.style.opacity = '0';
        installBtn.style.transform = 'translateX(-50%) translateY(100px)';
        setTimeout(() => installBtn.remove(), 300);
      }
    }, 10000);
  }

  // 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
  window.addEventListener('orientationchange', function() {
    setTimeout(function() {
      if (window.innerWidth <= 768) {
        window.scrollTo(0, 1);
        setTimeout(() => window.scrollTo(0, 0), 100);
      }
    }, 200);
  });

  // 5. –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è PWA
  if (window.matchMedia('(display-mode: standalone)').matches) {
    console.log('üéâ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ - –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç!');
    document.body.classList.add('pwa-mode');
  }

  // 6. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π viewport –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
  if (window.visualViewport) {
    window.visualViewport.addEventListener('resize', () => {
      const addressBarHeight = window.innerHeight - window.visualViewport.height;
      if (addressBarHeight > 0) {
        console.log('üìè –ê–¥—Ä–µ—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–Ω–∞, –≤—ã—Å–æ—Ç–∞:', addressBarHeight + 'px');
      } else {
        console.log('‚úÖ –ê–¥—Ä–µ—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–∫—Ä—ã—Ç–∞');
      }
    });
  }
</script>
</body>
</html>