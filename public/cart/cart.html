<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>clip & go ‚Ä¢ –ö–æ—Ä–∑–∏–Ω–∞</title>

  <!-- Fonts - Montserrat –∫–∞–∫ –≤ main -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/header.css" />
  <link rel="stylesheet" href="/cart/cart.css" />
  <link rel="stylesheet" href="/cart/cart-animations.css" media="(max-width:768px)" />

  <!-- Meta -->
  <meta name="theme-color" content="#1ca6f8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="description" content="–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ clip & go - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –∏ –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞">

  <!-- Maps Config -->
  <script src="/config.js"></script>
  <script>
    (function () {
      if (window.__ENV && window.__ENV.YANDEX_JSAPI_KEY) {
        const s = document.createElement('script');
        s.src = `https://api-maps.yandex.ru/2.1/?apikey=${window.__ENV.YANDEX_JSAPI_KEY}&lang=ru_RU`;
        s.onload = () => console.log('[Maps] –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        s.onerror = () => console.error('[Maps] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç');
        document.head.appendChild(s);
      } else {
        console.warn('[Maps] –ö–ª—é—á API –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
      }
    })();
  </script>
</head>

<body>
<!-- Header -->
<div id="header-container"></div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    fetch('/header.html')
            .then(r => r.text())
            .then(html => {
              document.getElementById('header-container').innerHTML = html;

              const hdr = document.getElementById('site-header');
              if (hdr) {
                hdr.classList.remove('scrolled');
                const TH = 50;
                const onScroll = () =>
                        window.scrollY > TH ? hdr.classList.add('scrolled') : hdr.classList.remove('scrolled');
                onScroll();
                window.addEventListener('scroll', onScroll);
              }

              // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
              const waitForCartManager = () => {
                if (window.CartManager) {
                  console.log('[Header] CartManager –Ω–∞–π–¥–µ–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã');
                  window.CartManager.updateCartCounter();
                } else {
                  console.log('[Header] –û–∂–∏–¥–∞–Ω–∏–µ CartManager...');
                  setTimeout(waitForCartManager, 50);
                }
              };
              setTimeout(waitForCartManager, 100);
            })
            .catch(console.error);
  });
</script>

<!-- Main Content -->
<main class="cart-container">
  <!-- Hero Section -->
  <div class="cart-hero glass touchable">
    <div class="hero-content">
      <div class="hero-icon">üõí</div>
      <div class="hero-info">
        <h1>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑</p>
      </div>
      <div class="hero-stats">
        <div class="hero-stat">
          <div class="stat-number" id="cartItemsCount">0</div>
          <div class="stat-label">—Ç–æ–≤–∞—Ä–æ–≤</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Items -->
  <div class="cart-section">
    <div class="section-header">
      <h2>
        <span class="section-icon">üì¶</span>
        <span>–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</span>
      </h2>
    </div>

    <div id="cartItemsContainer" class="cart-items-grid">
      <!-- Camera Item -->
      <div class="cart-item glass touchable" data-id="camera">
        <div class="item-image">
          <img src="/assets/images/cam3.jpg" alt="clip & go" />
        </div>
        <div class="item-info">
          <h3>clip & go</h3>
          <div class="item-details">
            <div class="item-detail">
              <span class="detail-icon">üé®</span>
              <span>–¶–≤–µ—Ç: <span id="cameraColor">‚Äî</span></span>
            </div>
            <div class="item-detail">
              <span class="detail-icon">üí∞</span>
              <span>–¶–µ–Ω–∞: <span id="cameraUnitPrice">8 900</span> ‚ÇΩ</span>
            </div>
          </div>
        </div>
        <div class="item-controls">
          <div class="quantity-control glass">
            <button class="quantity-btn minus-btn" data-id="camera">‚àí</button>
            <span class="quantity-value" data-id="camera">0</span>
            <button class="quantity-btn plus-btn" data-id="camera">+</button>
          </div>
          <button class="remove-btn" data-id="camera">
            <span>üóëÔ∏è</span>
            <span>–£–¥–∞–ª–∏—Ç—å</span>
          </button>
        </div>
      </div>

      <!-- Memory Item -->
      <div class="cart-item glass touchable" data-id="memory">
        <div class="item-image">
          <img src="/assets/images/CardPhoto.png" alt="–ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ 8 –ì–ë" />
        </div>
        <div class="item-info">
          <h3>–ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ 8 –ì–ë</h3>
          <div class="item-details">
            <div class="item-detail">
              <span class="detail-icon">üí∞</span>
              <span>–¶–µ–Ω–∞: <span id="memoryUnitPrice">500</span> ‚ÇΩ</span>
            </div>
            <div class="item-detail">
              <span class="detail-icon">‚ö°</span>
              <span>–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</span>
            </div>
          </div>
        </div>
        <div class="item-controls">
          <div class="quantity-control glass">
            <button class="quantity-btn minus-btn" data-id="memory">‚àí</button>
            <span class="quantity-value" data-id="memory">0</span>
            <button class="quantity-btn plus-btn" data-id="memory">+</button>
          </div>
          <button class="remove-btn" data-id="memory">
            <span>üóëÔ∏è</span>
            <span>–£–¥–∞–ª–∏—Ç—å</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Empty Cart Message -->
    <div id="emptyCartMessage" class="empty-state" style="display: none;">
      <div class="empty-icon">üõí</div>
      <h3>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
      <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã, —á—Ç–æ–±—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</p>
      <a href="/index.html" class="premium-btn primary">
        <span>üè™</span>
        <span>–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</span>
      </a>
    </div>
  </div>

  <!-- Delivery Section -->
  <div class="cart-section" id="deliverySectionContainer">
    <div class="delivery-card glass">
      <div class="section-header">
        <h2>
          <span class="section-icon">üöö</span>
          <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
        </h2>
      </div>

      <!-- City Selection -->
      <div class="form-group">
        <label for="addressInput">
          <span class="label-icon">üèôÔ∏è</span>
          <span>–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏</span>
        </label>
        <div class="input-wrapper">
          <input type="text" id="addressInput" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥..." autocomplete="off" />
          <ul id="citySuggestions" class="suggestions"></ul>
        </div>
      </div>

      <!-- Delivery Method Selection -->
      <div id="deliveryMethodSection" class="section-block">
        <label class="form-label">
          <span class="label-icon">üìã</span>
          <span>–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</span>
        </label>
        <div class="delivery-options">
          <div class="delivery-option glass touchable">
            <input type="radio" id="deliveryCourier" name="deliveryMethod" value="courier" />
            <label for="deliveryCourier">
              <img src="/assets/icons/cdek-truck.png" class="delivery-icon" alt="–ö—É—Ä—å–µ—Ä –°–î–≠–ö" />
              <div class="option-info">
                <div class="option-title">–ö—É—Ä—å–µ—Ä –°–î–≠–ö</div>
                <div class="option-desc">–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –¥–≤–µ—Ä–∏</div>
              </div>
            </label>
          </div>
          <div class="delivery-option glass touchable">
            <input type="radio" id="deliveryPvz" name="deliveryMethod" value="pvz" />
            <label for="deliveryPvz">
              <img src="/assets/icons/cdek-pvz.png" class="delivery-icon" alt="–ü–í–ó –°–î–≠–ö" />
              <div class="option-info">
                <div class="option-title">–ü–í–ó –°–î–≠–ö</div>
                <div class="option-desc">–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –ø—É–Ω–∫—Ç–∞</div>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- Street Address -->
      <div id="streetWrapper" class="section-block">
        <div class="form-group">
          <label for="streetInput">
            <span class="label-icon">üè†</span>
            <span>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</span>
          </label>
          <input type="text" id="streetInput" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞..." />
        </div>
      </div>

      <!-- Map Container -->
      <div class="map-wrapper">
        <div id="map" class="map-container"></div>
        <div id="pvz-info-panel" class="pvz-panel glass">
          <div class="pvz-placeholder">
            <div class="placeholder-icon">üìç</div>
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç</h3>
            <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –Ω–∞ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</p>
          </div>
        </div>
      </div>

      <!-- Tariff Options -->
      <div id="tariffOptions" class="tariff-container"></div>
    </div>
  </div>

  <!-- Recipient Section -->
  <div class="cart-section" id="recipientSectionContainer">
    <div class="recipient-card glass">
      <div class="section-header">
        <h2>
          <span class="section-icon">üë§</span>
          <span>–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è</span>
        </h2>
      </div>

      <div class="recipient-form">
        <div class="form-group full-width">
          <label for="recipientName">
            <span class="label-icon">üè∑Ô∏è</span>
            <span>–§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è *</span>
          </label>
          <input type="text" id="recipientName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required />
        </div>

        <div class="form-group">
          <label for="recipientPhone">
            <span class="label-icon">üì±</span>
            <span>–¢–µ–ª–µ—Ñ–æ–Ω *</span>
          </label>
          <input type="tel" id="recipientPhone" placeholder="+7 999 000 11 22" required />
        </div>

        <div class="form-group">
          <label for="recipientEmail">
            <span class="label-icon">üìß</span>
            <span>Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
          </label>
          <input type="email" id="recipientEmail" placeholder="user@example.com" />
        </div>
      </div>

      <div class="info-tip">
        <span class="tip-icon">üí°</span>
        <div class="tip-content">
          <strong>–í–∞–∂–Ω–æ:</strong> –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–≤—è–∑–∏. <span id="delivery-tip-text">–ö—É—Ä—å–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç–∞–≤–∫–æ–π.</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Promo Section -->
  <div class="cart-section" id="promoSectionContainer">
    <div class="promo-card glass touchable">
      <div class="promo-header">
        <span class="promo-icon">üéüÔ∏è</span>
        <h3>–ü—Ä–æ–º–æ–∫–æ–¥</h3>
      </div>
      <div class="promo-content">
        <div class="promo-form">
          <div class="promo-input-group">
            <input type="text" id="promoInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥..." />
            <button id="applyPromoBtn" class="premium-btn primary">
              <span>‚ú®</span>
              <span>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</span>
            </button>
          </div>
          <button id="removePromoBtn" class="premium-btn secondary" style="display:none;">
            <span>‚ùå</span>
            <span>–£–±—Ä–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</span>
          </button>
        </div>
        <div class="promo-hints">
          <div class="promo-hint">üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ: <code>clipgo25</code> –∏–ª–∏ <code>clipgo222</code></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Summary -->
  <div class="cart-section" id="orderSummaryContainer">
    <div class="summary-card glass">
      <div class="section-header">
        <h2>
          <span class="section-icon">üìä</span>
          <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
        </h2>
      </div>

      <div class="summary-details">
        <div class="summary-row">
                        <span class="summary-label">
                            <span class="summary-icon">üì¶</span>
                            <span>–¢–æ–≤–∞—Ä—ã</span>
                        </span>
          <span class="summary-value">
                            <span id="itemsSubtotal">0</span> ‚ÇΩ
                        </span>
        </div>
        <div class="summary-row">
                        <span class="summary-label">
                            <span class="summary-icon">üöö</span>
                            <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
                        </span>
          <span class="summary-value">
                            <span id="shippingCostValue">0</span> ‚ÇΩ
                        </span>
        </div>
        <div id="discountRow" class="summary-row discount-row" style="display: none;">
                        <span class="summary-label">
                            <span class="summary-icon">üéüÔ∏è</span>
                            <span>–°–∫–∏–¥–∫–∞</span>
                        </span>
          <span class="summary-value discount-value">
                            -<span id="discountAmount">0</span> ‚ÇΩ
                        </span>
        </div>
      </div>

      <div class="summary-total">
        <div class="total-amount">
          <span class="total-label">–ò—Ç–æ–≥–æ:</span>
          <span class="total-value"><span id="cartTotalValue">0</span> ‚ÇΩ</span>
        </div>
      </div>

      <div id="deliveryInfo" class="delivery-info"></div>

      <!-- Payment Methods -->
      <div class="payment-methods">
        <div class="payment-label">–ü—Ä–∏–Ω–∏–º–∞–µ–º –∫ –æ–ø–ª–∞—Ç–µ:</div>
        <div class="payment-icons">
          <img src="/assets/icons/payments/visa.png" alt="Visa" />
          <img src="/assets/icons/payments/mastercard.png" alt="Mastercard" />
          <img src="/assets/icons/payments/mir.png" alt="–ú–ò–†" />
          <img src="/assets/icons/payments/sbp.png" alt="–°–ë–ü" />
        </div>
      </div>

      <button id="checkoutBtn" class="checkout-btn premium-btn primary">
        <span class="btn-icon">üîí</span>
        <span>–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∏ –æ–ø–ª–∞—Ç–∏—Ç—å</span>
      </button>

      <div class="legal-notice">
        –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å
        <a href="/Policy/privacy-cookie-policy.html">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
        –∏ —É—Å–ª–æ–≤–∏—è–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      </div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="premium-footer">
  <div class="footer-content">
    <div class="footer-brand">
      <strong>clip & go</strong>
    </div>
    <div class="footer-links">
      <a href="/Policy/privacy-cookie-policy.html">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
    </div>
    <div class="footer-year">
      ¬© 2025 ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="/js/cart-manager.js"></script>
<script src="/js/script.js"></script>
<script src="/js/mobile-header.js"></script>
<script src="/cart/cart.js"></script>
</body>
</html>